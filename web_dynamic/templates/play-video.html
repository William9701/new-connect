<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Play Video</title>
    <link rel="stylesheet" href="/static/styles/stlye.css" />
    <script src="/static/scripts/play-video.js"></script>
  </head>
  <body>
    <nav class="flex-div">
      <div class="nav-left flex-div">
        <img src="/static/images/menu.png" class="menu-icon" />
        <a href="/content"
          ><img src="/static/images/Connect-logo.png" class="logo"
        /></a>
      </div>
      <div class="nav-midle flex-div">
        <div class="search-box flex-div">
          <form action="" class="search-bar">
            <input type="text" name="q" placeholder="Search By Location" />
            <button type="submit">
              <img src="/static/images/search.png" />
            </button>
          </form>
        </div>
        <img src="/static/images/voice-search.png" class="mic-icon" alt="" />
      </div>
      <div class="nav-right flex-div">
        <a href="/login"><img src="/static/images/upload.png" /></a>

        <img src="/static/images/more.png" />
        <div class="location">
          <img src="/static/images/placeholder.png" />
          <div class="sub-menu-1">
            <ul>
              {% set used_names = [] %} {% for location in locations %} {% if
              location.name not in used_names %}
              <li>
                <a
                  href="#"
                  class="location-link"
                  data-name="{{ location.name }}"
                  >{{ location.name }}</a
                >
              </li>
              {% set _ = used_names.append(location.name) %} {% endif %} {%
              endfor %}
            </ul>
          </div>
        </div>
      </div>
    </nav>

    <div class="container play-container">
      <div class="row">
        <div class="play-video">
          <video controls autoplay id="videoPlayer">
            <!-- Initial source with a placeholder URL -->
            <source id="videoSource" src="" type="video/mp4" />
          </video>

          <div class="tags">
            <a href="">#Coding</a> <a href="">#Html</a> <a href="">#CSS</a>
            <a href="">#Javascript</a>
          </div>
          <h3>{{ content.description }}</h3>
          <div class="play-video-info">
            <p>{{ content.number_of_views}} views &bull; 2 days ago</p>
            <div>
              <a href="#" onclick="like('{{ content.id }}', '{{ user.id }}')">
                <img id="like_logo" src="/static/images/like.png" />
                <span id="likes-{{ content.id }}"
                  >{{ likes_counts.get(content.id, 0) }}</span
                >
              </a>

              <a
                href="#"
                onclick="dislike('{{ content.id }}', '{{ user.id }}')"
              >
                <img id="dislike_logo" src="/static/images/dislike.png" />
                <span id="dislikes-{{ content.id }}"
                  >{{ dislikes_counts.get(content.id, 0) }}</span
                >
              </a>

              <a href="#" id="myBtn"
                ><img src="/static/images/share.png" />Share</a
              >
              <div id="myModal">
                <div id="modalContent">
                    <span id="close">&times;</span>
                    <span id="copy">&#128203;</span>
                    <p id="copy_text"></p>
                </div>
            </div>
              <a href="#" onclick="Save('{{ content.id }}')"><img src="/static/images/save.png" />Save</a>
            </div>
          </div>
          <hr />
          <div class="publisher">
            {% for user in users%} {% if user.id == content.user_id%}
            <img src="{{ user.image }}" />
            <div>
              <p>{{ user.username }}</p>
              <span>500k Subscribers</span>
            </div>
            <button type="button">Subscribe</button>
          </div>

          <div class="vid-description">
            <p>{{ content.description }}</p>
            <p>Subscribe here to watch more</p>
            <hr />
            <h4>134 Comments</h4>
            <div class="add-comment">
              <img src="{{ user.image }}" />
              <input type="text" placeholder="Write comments..." />
              {% endif %} {% endfor %}
            </div>
            <div class="old-comment">
              <img src="/static/images/Jack.png" />

              <div>
                <h3>Jack Nicholas <span>2 days ago</span></h3>
                <p>thsgssh hgugldiuga ;iuagduogaug kuaduocga. kgi</p>
                <div class="acomment-action">
                  <img src="/static/images/like.png" />
                  <span>244</span>
                  <img src="/static/images/dislike.png" />
                  <span>2</span>
                  <span>REPLY</span>
                  <a href="">ALL replies</a>
                </div>
              </div>
            </div>

            <div class="old-comment">
              <img src="/static/images/Jack.png" />
              <div>
                <h3>Jack Nicholas <span>2 days ago</span></h3>
                <p>thsgssh hgugldiuga ;iuagduogaug kuaduocga. kgi</p>
                <div class="acomment-action">
                  <img src="images/like.png" />
                  <span>244</span>
                  <img src="images/dislike.png" />
                  <span>2</span>
                  <span>REPLY</span>
                  <a href="">ALL replies</a>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="right-sidebar">
          {% for content in contents %} {% if loop.index <= 7 %}
          <div class="side-video-list">
            <a href="play/{{ content.id }}">
              <video
                autoplay
                src="{{ content.content }}"
                class="small-thumbnail"
              ></video>
            </a>
            <div class="vid-info">
              {% for user in users %} {% if user.id == content.user_id %}
              <a href="play/{{ content.id }}"
                >{{ user.first_name }} {{ user.last_name }}</a
              >
              {% endif %} {% endfor %}
              <p>{{ content.description }}</p>
              <p>{{ content.number_of_views }} views</p>
            </div>
          </div>
          {% endif %} {% endfor %}
        </div>
      </div>
    </div>
    <script>
      // Get the video element and source element
      const video = document.getElementById("videoPlayer");
      const videoSource = document.getElementById("videoSource");

      // Assuming you have the content URL from your server, replace it with the actual URL
      const contentUrl = "{{ content.content }}";

      // Modify the source URL dynamically
      // Assuming you want to remove the '..' before 'static'
      const modifiedUrl = contentUrl.replace("..", "");

      // Update the source attribute
      videoSource.src = modifiedUrl;

      // Load the new source
      video.load();
    </script>
  </body>
</html>
